# FPGARebootMon monitors the ScratchPad register. If the value read 
# differs from the expected value, it calls cpswLoadConfig via the 
# loadConfig record
#
# Macros:
#     P:            the PV prefix
#     KEY:          the value set for the ScratchPad register in the config
#     PORT:         the ASYN port name specified when loading the cpsw driver

record(calcout, "$(P):FPGARebootMon") {
  field(SCAN, "10 second")
  field(DESC, "Verify AxiVersion Scratchpad")
  field(INPA, "$(P):ScratchPadRBV")
  field(B,    "$(KEY)")
  field(CALC, "A != B")
  field(OUT,  "$(P):loadConfig.PROC")
  field(OOPT, "When Non-zero")
}
