##############################################################################
## This file is part of 'LCLS2 Common Carrier Core'.
## It is subject to the license terms in the LICENSE.txt file found in the
## top-level directory of this distribution and at:
##    https://confluence.slac.stanford.edu/display/ppareg/LICENSE.html.
## No part of 'LCLS2 Common Carrier Core', including this file,
## may be copied, modified, propagated, or distributed except according to
## the terms contained in the LICENSE.txt file.
##############################################################################
#schemaversion 3.0.0
#once MoverCntl.yaml

MoverCntl: &MoverCntl
  description: "Mover Control for Pyro"
  class: MMIODev
  configPrio: 1
  size: 0x010000
  #########
  children:
  #########
    #########################################################
    MoverOnOff:
      class: IntField
      at:
        offset: 0x0000
      sizeBits: 6
      mode: RW
      description: "Mover control, 0 - mover removed, 1 - mover inserted"
    #########################################################
    StatusLimitSwitches:
      class: IntField
      at:
        offset: 0x0004
      sizeBits: 12
      mode: RO
      description: "2 groups, bits 5-0 limits switches are 1 when inserted, 11-6 are 1 when removed, so  for 6 movers, corresponding 00 - moving, 01 - mover removed, 10 - mover inserted,  11 - Broken"
    #########################################################
    Inserted:
      class: IntField
      at:
        offset: 0x0008
      sizeBits: 6
      mode: RO
      description: "Status interpretation by firmware: 1 - inserted"
    #########################################################
    Removed:
      class: IntField
      at:
        offset: 0x000C
      sizeBits: 6
      mode: RO
      description: "Status interpretation by firmware: 1 - removed"
    #########################################################
    Attenuation:
      class: IntField
      at:
        offset: 0x0010
        nelms: 16
        stride: 4
      encoding: IEEE_754
      sizeBits: 32
      mode: RW
      description: "float - Attenuation factor for different combination of inserts, bit 5-2 of 0x0 define selection"
    #########################################################
    IgnoreMover:
      class: IntField
      at:
        offset: 0x0050
      sizeBits: 1
      mode: RW
      description: "Ignore limit switches position for testing: 1 - Ignore"
    #########################################################